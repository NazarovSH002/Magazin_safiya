<div id="view-stock" class="view">
    <div style="display: flex; gap: 12px; margin-bottom: 20px; justify-content: flex-end;">
        <button class="btn btn-outline" onclick="downloadTemplate()">–®–∞–±–ª–æ–Ω</button>
        <button class="btn btn-primary" onclick="document.getElementById('importInput').click()">üöÄ –ò–º–ø–æ—Ä—Ç CSV</button>
        <input type="file" id="importInput" style="display: none;" onchange="importCSV(event)">
    </div>
    <div class="grid-stock">
        <div class="card" style="margin-bottom: 20px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 id="stockFormTitle" style="font-size: 18px; font-weight: 700;">–ù–æ–≤—ã–π —Ç–æ–≤–∞—Ä</h3>
                <button class="btn btn-sm btn-outline" onclick="clearStockForm()">+ –ù–æ–≤—ã–π / –°–±—Ä–æ—Å</button>
            </div>
            <div class="form-group">
                <input type="text" id="pName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞">
            </div>
            <div class="form-group">
                <input type="number" id="pQty" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ">
            </div>
            <div class="form-group">
                <label style="font-size: 12px; color: var(--text-muted);">–¶–µ–Ω–∞ –ó–∞–∫—É–ø–∫–∏ (¬•)</label>
                <input type="number" id="pPriceCNY" value="0.0" oninput="calculateTarget()">
            </div>
            <div class="form-group">
                <label style="font-size: 12px; color: var(--text-muted);">–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å (UZS)</label>
                <input type="number" id="pCostUZS" value="0" placeholder="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–µ—Ç—Å—è">
            </div>
            <div class="form-group">
                <label style="font-size: 12px; color: var(--text-muted);">–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ (UZS)</label>
                <input type="number" id="pPriceUZS" value="0">
            </div>
            <div class="form-group">
                <label style="font-size: 12px; color: var(--text-muted);">–î–∞—Ç–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è</label>
                <input type="date" id="pDate">
            </div>
            <div class="form-group" style="display: flex; align-items: center; gap: 8px; margin-top: 10px;">
                <input type="checkbox" id="pToShop" style="width: auto;">
                <label for="pToShop" style="font-size: 13px; cursor: pointer;">–î–æ–±–∞–≤–∏—Ç—å —Å—Ä–∞–∑—É –≤ –º–∞–≥–∞–∑–∏–Ω</label>
            </div>
            <button class="btn btn-outline" style="width: 100%; margin: 10px 0;" onclick="calculateTarget()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å
                –¶–µ–Ω—É</button>
            <button id="saveStockBtn" class="btn btn-primary" style="width: 100%;"
                onclick="addOrUpdateProduct()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞
                —Å–∫–ª–∞–¥–µ</button>

            <div style="margin-top: 25px; padding-top: 15px; border-top: 1px dashed var(--border);">
                <p style="font-size: 11px; color: var(--text-muted); margin-bottom: 8px;">–ü—Ä–∏–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è Excel:</p>
                <table style="width: 100%; font-size: 10px; border-collapse: collapse; background: rgba(0,0,0,0.2);">
                    <tr style="background: var(--bg-input);">
                        <th style="padding: 4px; border: 1px solid var(--border);">Name</th>
                        <th style="padding: 4px; border: 1px solid var(--border);">Quantity</th>
                        <th style="padding: 4px; border: 1px solid var(--border);">Cost_CNY</th>
                        <th style="padding: 4px; border: 1px solid var(--border);">Price_UZS</th>
                    </tr>
                    <tr>
                        <td style="padding: 4px; border: 1px solid var(--border);">iPhone 15</td>
                        <td style="padding: 4px; border: 1px solid var(--border);">10</td>
                        <td style="padding: 4px; border: 1px solid var(--border);">5200</td>
                        <td style="padding: 4px; border: 1px solid var(--border);">15000000</td>
                    </tr>
                </table>
                <p style="font-size: 10px; color: var(--accent); margin-top: 8px;">* Price_UZS –º–æ–∂–Ω–æ –Ω–µ –∑–∞–ø–æ–ª–Ω—è—Ç—å</p>
            </div>
        </div>

        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h3 style="font-size: 18px; font-weight: 700;">üì¶ –¢–æ–≤–∞—Ä –Ω–∞ —Å–∫–ª–∞–¥–µ</h3>
                <button class="btn btn-primary btn-sm" onclick="printReport('stock')">üñ®Ô∏è –ü–µ—á–∞—Ç—å</button>
            </div>
            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                <div class="search-box" style="margin-bottom: 0; flex: 1;">
                    <input type="text" id="stockSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Å–∫–ª–∞–¥—É..." oninput="renderStock()">
                </div>
                <button id="multiDeleteBtn" class="btn btn-danger" style="display: none;" onclick="bulkDelete()">–£–¥–∞–ª–∏—Ç—å
                    –≤—ã–±—Ä–∞–Ω–Ω—ã–µ</button>
            </div>
            <div class="table-container" style="max-height: 600px;">
                <table>
                    <thead>
                        <tr>
                            <th style="width: 30px;"><input type="checkbox" id="selectAll"
                                    onclick="toggleAllCheckboxes(this.checked)"></th>
                            <th>–¢–æ–≤–∞—Ä –Ω–∞ —Å–∫–ª–∞–¥–µ</th>
                            <th>–ö–æ–ª-–≤–æ</th>
                            <th>–ó–∞–∫—É–ø</th>
                            <th>–¶–µ–Ω–∞ –≤ —Å—É–º–º–∞—Ö</th>
                            <th style="width: 140px;">–î–µ–π—Å—Ç–≤–∏–µ</th>
                        </tr>
                    </thead>
                    <tbody id="stock-tbody"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>